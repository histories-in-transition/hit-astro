---
import PageLayout from "../layouts/page-layout.astro";
import { Icon } from "astro-icon/components";
import NavLink from "../components/nav-link.astro";
---

<PageLayout title="Search Strata">
	<div class="grid mx-auto md:w-3/4 sm:w-4/5 md:py-4 gap-2">
		<div
			class="flex items-center justify-between md:justify-start md:gap-4 rounded-lg pr-4 py-2 justify-self-start"
		>
			<span class="text-2xl font-bold text-brand-800 mb-2 block">Erweiterte Suche nach:</span>
			<div class="inline-flex bg-brand-700 rounded-full p-1 justify-self-start">
				<NavLink href="/search" class="px-6 py-3 text-sm font-bold text-brand-100 rounded-full">
					Manuskripteinträgen (MS-items)
				</NavLink>
				<h1 class="px-6 py-3 text-sm font-bold bg-brand-100 text-brand-700 rounded-full">Strata</h1>
			</div>
		</div>

		<div class="md:space-y-6 bg-white py-2 md:py-0">
			<!-- Search Input and Stats -->
			<div class="flex items-center gap-2 md:mx-0 mx-3">
				<button
					id="filter-button"
					aria-label="filter"
					class="md:hidden flex items-center justify-center rounded-lg border border-gray-300 w-12 h-12"
				>
					<Icon aria-hidden="true" name="lucide:sliders-horizontal" />
				</button>

				<div id="searchbox" class="flex-1 md:px-10 px-3 py-3 md:py-6 rounded-md md:bg-brand-600">
				</div>
			</div>

			<div class="grid md:grid-cols-[1fr_3fr] gap-6 md:px-5">
				<!-- Refinements Section -->
				<div>
					<div class="md:block hidden rounded-xs" id="refinements-section">
						<aside>
							<div id="refinement-list-work"></div>
							<div id="refinement-list-authors"></div>
							<div id="refinement-list-manuscripts"></div>
							<div id="refinement-list-character"></div>
							<div id="refinement-list-orig-date"></div>
							<div id="refinement-list-century"></div>
							<div id="date-range-widget"></div>
							<div id="refinement-list-orig-place"></div>
							<div id="refinement-list-hands-role"></div>
							<div id="refinement-list-hands-function"></div>
							<div id="refinement-list-scribe-type"></div>
							<div id="refinement-list-form"></div>
							<div id="refinement-list-modifications"></div>
							<div id="refinement-list-interpolations"></div>
							<div id="refinement-list-language"></div>
							<div id="refinement-list-project"></div>
						</aside>
					</div>
				</div>
				<div>
					<!-- Current Refinements -->
					<div class="grid md:grid-cols-[4fr_1fr] justify-between md:mr-5 px-3">
						<div id="current-refinements" class="text-sm text-gray-600"></div>
						<div id="clear-refinements" class="justify-self-end"></div>
					</div>
					<section class="md:space-y-3 md:my-5">
						<!-- Stats and pagination -->
						<div class="grid grid-cols-1 md:grid-cols-[1fr_auto] items-center md:gap-8 px-2">
							<div id="stats-container" class="text-base italic text-brand-600"></div>
							<div id="pagination" class="flex md:justify-center"></div>
						</div>
						<!-- Results Section -->
						<div id="hits" class="px-3"></div>
					</section>
				</div>
			</div>
		</div>
	</div>

	<div
		id="server-error-notification"
		style="hiden"
		class="bg-brand-600 text-2xl font-semibold text-white w-1/2 p-4 rounded-md mx-auto text-center"
	>
		Serverfehler: Die Suche ist derzeit nicht verfügbar. Bitte versuchen Sie es später erneut.
	</div>

	<!-- Back to Top Button for Mobile -->
	<button
		id="back-to-top"
		class="fixed bottom-20 right-4 md:hidden bg-brand-600 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg opacity-80"
	>
		<svg
			xmlns="http://www.w3.org/2000/svg"
			class="h-6 w-6"
			fill="none"
			viewBox="0 0 24 24"
			stroke="currentColor"
		>
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"
			></path>
		</svg>
	</button>

	<script src="@/lib/advanced-strata-search.js"></script>
</PageLayout>
